<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billions must post!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        h1{
            background-color: aliceblue;
            color: black;
        }
        .upload-form {
            margin-bottom: 20px;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
        }
        .gallery-item {
            margin: 10px;
        }
        img, video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<header>Gem Mine!</header>
<body>
    <h1>Upload Gems and Keks in this Gem mine!</h1>
    <form class="upload-form" action="/upload" method="POST" enctype="multipart/form-data">
        <label for="file-upload">Choose Gem to upload:</label>
        <input type="file" id="file-upload" name="file-upload" accept="image/*,video/*" required>
        <button type="submit">Post</button>
    </form>

    <h2>Gems</h2>
    <div class="gallery" id="gallery">
        <!-- Gallery items will be displayed here -->
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Fetch and display the gallery items
            fetchGallery();

            // Function to fetch and display gallery items
            function fetchGallery() {
                fetch('/gallery')
                    .then(response => response.json())
                    .then(data => {
                        const gallery = document.getElementById('gallery');
                        gallery.innerHTML = '';
                        data.forEach(item => {
                            const div = document.createElement('div');
                            div.classList.add('gallery-item');
                            if (item.type.startsWith('image/')) {
                                const img = document.createElement('img');
                                img.src = item.url;
                                div.appendChild(img);
                            } else if (item.type.startsWith('video/')) {
                                const video = document.createElement('video');
                                video.src = item.url;
                                video.controls = true;
                                div.appendChild(video);
                            }
                            gallery.appendChild(div);
                        });
                    })
                    .catch(error => console.error('Error fetching gallery:', error));
            }
        });
    </script>
    <footer>created in grand and spiteful hatred alongside stark opposition toward those who robbed us of our dear and greatly cherished freedom to post whatever our hearts joyfully please and wish to!</footer>
</body>
</html>
